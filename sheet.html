<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GxD6 Character Sheet</title>
  <style>
    @font-face {
      font-family: 'DominicanSmall';
      src: url('fonts/DOMISC__.TTF') format('truetype');
    }

    @font-face {
      font-family: 'DeutschGothic';
      src: url('fonts/DeutschGothic.ttf') format('truetype');
    }

    body {
      background-image: url('img/GXD6 Greyscale paper background.jpg');
      background-size: cover;
      font-family: 'DominicanSmall', serif;
      padding: 20px;
      color: black;
    }

    h1 {
      font-size: 2.5em;
      text-align: center;
      margin-bottom: 10px;
    }

    .sheet-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      max-width: 900px;
      margin: 0 auto;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 20px;
      border-radius: 10px;
    }

    .section {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .field {
      flex: 1 1 200px;
      display: flex;
      flex-direction: column;
    }

    label {
      font-family: 'DominicanSmall';
      font-size: 1em;
      margin-bottom: 5px;
    }

    input, textarea {
      font-family: 'DeutschGothic', sans-serif;
      font-size: 1.1em;
      padding: 5px;
      border: 1px solid #333;
      border-radius: 5px;
      background-color: #fdfdfd;
    }

    textarea {
      resize: vertical;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }

    .btn {
      padding: 10px 20px;
      font-size: 1.1em;
      font-family: 'DominicanSmall';
      background-color: #222;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .btn:hover {
      background-color: #444;
    }
  </style>
</head>
<body>
  <h1>GxD6 Character Sheet</h1>

  <div class="sheet-container">
    <div class="section">
      <div class="field">
        <label>Character Name</label>
        <input id="charName" type="text" />
      </div>
      <button onclick="saveCharacter()">üíæ Save Character</button>
      <div class="field">
        <label>Archetype</label>
        <input id="charArchetype" type="text" />
      </div>
      <div class="field">
        <label>XP</label>
        <input id="charXP" type="number" />
      </div>
    </div>

    <div class="section">
      <div class="field">
        <label>Strength</label>
        <input id="charStr" type="number" />
      </div>
      <div class="field">
        <label>Agility</label>
        <input id="charAgi" type="number" />
      </div>
      <div class="field">
        <label>Wits</label>
        <input id="charWits" type="number" />
      </div>
      <div class="field">
        <label>Empathy</label>
        <input id="charEmp" type="number" />
      </div>
    </div>

    <div class="section">
      <div class="field" style="flex: 1 1 100%;">
        <label>Gear / Notes</label>
        <textarea id="charGear" rows="4"></textarea>
      </div>
    </div>

    <div class="buttons">
      <button class="btn" onclick="saveCharacter()">üíæ Save</button>
      <button class="btn" onclick="loadCharacter()">üìÇ Load</button>
    </div>
  </div>

  <!-- ‚úÖ Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDVINPqS-nMiWEs7RvabEqKuuUrii2S2MM",
      authDomain: "gxd6-character-sheet.firebaseapp.com",
      projectId: "gxd6-character-sheet",
      storageBucket: "gxd6-character-sheet.firebasestorage.app",
      messagingSenderId: "761778638151",
      appId: "1:761778638151:web:06a1d72423a7e980889062"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function saveCharacter() {
      const doc = {
        name: document.getElementById('charName').value,
        archetype: document.getElementById('charArchetype').value,
        xp: document.getElementById('charXP').value,
        strength: document.getElementById('charStr').value,
        agility: document.getElementById('charAgi').value,
        wits: document.getElementById('charWits').value,
        empathy: document.getElementById('charEmp').value,
        gear: document.getElementById('charGear').value,
      };

      db.collection("characters").doc(doc.name).set(doc)
        .then(() => alert("Character saved!"))
        .catch((error) => alert("Error saving: " + error));
    }

    function loadCharacter() {
      const name = prompt("Enter the character name to load:");
      if (!name) return;

      db.collection("characters").doc(name).get()
        .then((doc) => {
          if (doc.exists) {
            const data = doc.data();
            document.getElementById('charName').value = data.name;
            document.getElementById('charArchetype').value = data.archetype;
            document.getElementById('charXP').value = data.xp;
            document.getElementById('charStr').value = data.strength;
            document.getElementById('charAgi').value = data.agility;
            document.getElementById('charWits').value = data.wits;
            document.getElementById('charEmp').value = data.empathy;
            document.getElementById('charGear').value = data.gear;
          } else {
            alert("Character not found.");
          }
        })
        .catch((error) => alert("Error loading: " + error));
    }
  </script>
  <script>
  // Function to save character to Firebase
  function saveCharacter() {
    const name = document.getElementById('charName')?.value;
    if (!name) {
      alert("‚ö†Ô∏è Please enter a character name first!");
      return;
    }

    const doc = {
      name: name,
      archetype: document.getElementById('charArchetype')?.value || '',
      xp: parseInt(document.getElementById('charXP')?.value) || 0,
      strength: parseInt(document.getElementById('charStr')?.value) || 0,
      agility: parseInt(document.getElementById('charAgi')?.value) || 0,
      wits: parseInt(document.getElementById('charWits')?.value) || 0,
      empathy: parseInt(document.getElementById('charEmp')?.value) || 0,
      gear: document.getElementById('charGear')?.value || ''
    };

    db.collection("characters").doc(name).set(doc)
      .then(() => {
        alert("‚úÖ Character saved successfully!");
      })
      .catch((error) => {
        console.error("‚ùå Error saving character:", error);
        alert("‚ùå Failed to save character.");
      });
  }
</script>

</body>
</html>
